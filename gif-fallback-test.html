<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Fallback Test - Visual House</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f0f0f0;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
        }
        .gif-preview {
            max-width: 400px;
            max-height: 300px;
            border: 2px solid #ccc;
            border-radius: 4px;
        }
        .button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 0;
        }
        .button:hover {
            background: #0056b3;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    </style>
</head>
<body>
    <h1>GIF Fallback Test for Visual House</h1>
    
    <div class="test-section">
        <h2>1. GIF File Test</h2>
        <p>Testing if home-gif.gif loads correctly:</p>
        <img id="gif-test" src="assets/media/home-gif.gif" alt="Home GIF" class="gif-preview"
             onload="markGifSuccess()" onerror="markGifError()">
        <div id="gif-status" class="status info">Loading GIF...</div>
    </div>
    
    <div class="test-section">
        <h2>2. Video Fallback Simulation</h2>
        <p>Simulate video loading failure to test GIF fallback:</p>
        <button class="button" onclick="testVideoFallback()">Simulate Video Failure</button>
        <div id="simulation-container" style="position: relative; width: 400px; height: 300px; background: #000; margin: 10px 0;">
            <video id="test-video" style="width: 100%; height: 100%; object-fit: cover;" muted loop>
                <source src="fake-video-that-doesnt-exist.mp4" type="video/mp4">
            </video>
            <img id="test-gif-fallback" src="assets/media/home-gif.gif" 
                 style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; display: none;" 
                 alt="GIF Fallback">
        </div>
        <div id="simulation-status" class="status info">Click button to test fallback</div>
    </div>
    
    <div class="test-section">
        <h2>3. Performance Test</h2>
        <p>Check loading times:</p>
        <button class="button" onclick="testLoadingTime()">Test GIF Loading Time</button>
        <div id="performance-status" class="status info">Click button to test performance</div>
    </div>
    
    <div class="test-section">
        <h2>4. Mobile Simulation</h2>
        <p>Test mobile behavior:</p>
        <button class="button" onclick="simulateMobile()">Simulate Mobile View</button>
        <div id="mobile-status" class="status info">Click button to simulate mobile</div>
        <div id="mobile-test" style="display: none;">
            <div style="width: 375px; height: 667px; border: 2px solid #333; margin: 10px 0; position: relative;">
                <img src="assets/media/home-gif.gif" style="width: 100%; height: 100%; object-fit: cover;" alt="Mobile GIF Test">
            </div>
        </div>
    </div>

    <script>
        function markGifSuccess() {
            document.getElementById('gif-status').innerHTML = '<strong>‚úÖ SUCCESS:</strong> home-gif.gif loaded successfully!';
            document.getElementById('gif-status').className = 'status success';
        }
        
        function markGifError() {
            document.getElementById('gif-status').innerHTML = '<strong>‚ùå ERROR:</strong> home-gif.gif failed to load. Check file path and name.';
            document.getElementById('gif-status').className = 'status error';
        }
        
        function testVideoFallback() {
            const video = document.getElementById('test-video');
            const gifFallback = document.getElementById('test-gif-fallback');
            const status = document.getElementById('simulation-status');
            
            status.innerHTML = 'Testing video fallback...';
            status.className = 'status info';
            
            // Simulate video error
            setTimeout(() => {
                video.style.display = 'none';
                gifFallback.style.display = 'block';
                status.innerHTML = '<strong>‚úÖ SUCCESS:</strong> Video failed, GIF fallback activated!';
                status.className = 'status success';
            }, 1000);
        }
        
        function testLoadingTime() {
            const status = document.getElementById('performance-status');
            const startTime = performance.now();
            
            status.innerHTML = 'Measuring GIF loading time...';
            status.className = 'status info';
            
            const testImg = new Image();
            testImg.onload = () => {
                const endTime = performance.now();
                const loadTime = (endTime - startTime).toFixed(2);
                status.innerHTML = `<strong>‚úÖ RESULT:</strong> GIF loaded in ${loadTime}ms`;
                status.className = 'status success';
            };
            testImg.onerror = () => {
                status.innerHTML = '<strong>‚ùå ERROR:</strong> GIF failed to load during performance test';
                status.className = 'status error';
            };
            testImg.src = 'assets/media/home-gif.gif?' + Date.now(); // Cache busting
        }
        
        function simulateMobile() {
            const mobileTest = document.getElementById('mobile-test');
            const status = document.getElementById('mobile-status');
            
            mobileTest.style.display = 'block';
            status.innerHTML = '<strong>üì± MOBILE VIEW:</strong> Simulating iPhone viewport with GIF background';
            status.className = 'status success';
        }
        
        // Check file size
        fetch('assets/media/home-gif.gif', { method: 'HEAD' })
            .then(response => {
                const size = response.headers.get('Content-Length');
                if (size) {
                    const sizeMB = (size / (1024 * 1024)).toFixed(2);
                    console.log(`GIF file size: ${sizeMB}MB`);
                    
                    // Add file size info to the page
                    const sizeInfo = document.createElement('div');
                    sizeInfo.className = 'status info';
                    sizeInfo.innerHTML = `<strong>üìä FILE SIZE:</strong> home-gif.gif is ${sizeMB}MB`;
                    document.querySelector('.test-section').appendChild(sizeInfo);
                }
            })
            .catch(error => {
                console.log('Could not get file size:', error);
            });
    </script>
</body>
</html>